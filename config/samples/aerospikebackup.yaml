apiVersion: asdb.aerospike.com/v1beta1
kind: AerospikeBackup
metadata:
  labels:
    app.kubernetes.io/name: aerospikebackup
    app.kubernetes.io/instance: aerospikebackup-sample
    app.kubernetes.io/part-of: aerospike-kubernetes-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: aerospike-kubernetes-operator
  name: aerospikebackup
  namespace: aerospike
spec:
  backupService:
    name: aerospikebackupservice-sample
    namespace: aerospike
#  onDemandBackups:
#    - id: first-ad-hoc-backup
#      routineName: test-routine
  config:
    aerospike-cluster:
      aerospike-aerospikebackup-test-cluster:
        credentials:
          password: admin123
          user: admin
        seed-nodes:
          - host-name: aerocluster.aerospike.svc.cluster.local
            port: 3000
    backup-routines:
      aerospike-aerospikebackup-test-routine:
        backup-policy: test-policy
        interval-cron: "@daily"
        incr-interval-cron: "@hourly"
        namespaces: ["test"]
        source-cluster: aerospike-aerospikebackup-test-cluster
        storage: local
      aerospike-aerospikebackup-test-routine1:
        backup-policy: test-policy1
        interval-cron: "@daily"
        incr-interval-cron: "@hourly"
        namespaces: [ "test" ]
        source-cluster: aerospike-aerospikebackup-test-cluster
        storage: s3Storage
